# 4 月 21 日题目

## 一、v-if 和 v-for 为什么不能连用？

永远不要把 `v-if` 和 `v-for` 同时用在同一个元素上。

`v-if` 是“真正”的条件渲染，因为它会确保在切换过程中条件块内的事件监听器和子组件适当地被销毁和重建。
`v-for` 指令基于一个数组来渲染一个列表

一般我们在两种常见的情况下会倾向于这样做：

- 为了过滤一个列表中的项目 (比如 v-for="user in users" v-if="user.isActive")。在这种情形下，请将 users 替换为一个计算属性 (比如 activeUsers)，让其返回过滤后的列表。

- 为了避免渲染本应该被隐藏的列表 (比如 v-for="user in users" v-if="shouldShowUsers")。这种情形下，请将 v-if 移动至容器元素上 (比如 ul、ol)

当 Vue 处理指令时，v-for 比 v-if 具有更高的优先级，所以这个模板：

```js
<ul>
  <li
    v-for="user in users"
    v-if="user.isActive"
    :key="user.id"
  >
    {{ user.name }}
  </li>
</ul>
```

将会经过如下运算：

```js
this.users.map((user) => {
	if (user.isActive) {
		return user.name;
	}
});
```

因此哪怕我们只渲染出一小部分用户的元素，也得在每次重渲染的时候遍历整个列表，不论活跃用户是否发生了变化。带来性能方面的浪费

v-for比v-if优先，如果每一次都需要遍历整个数组，将会影响速度，尤其是当之需要渲染很小一部分的时候 。可以采取多层包裹来解决性能损耗问题。例如外层给标签绑定指令v-if或者是内层标签绑定v-if

## 二、单页面应用和多页面应用的区别和优缺点？

- 单页面应用（SPA）

  SPA 是一种特殊的 Web 应用，是加载单个 HTML 页面并在用户与应用程序交互时动态更新该页面的。它将所有的活动局限于一个 Web 页面中，仅在该 Web 页面初始化时加载相应的 HTML 、 JavaScript 、 CSS 。一旦页面加载完成， SPA 不会因为用户的操作而进行页面的重新加载或跳转，而是利用 JavaScript 动态的变换 HTML（采用的是 div 切换显示和隐藏），从而实现 UI 与用户的交互。在 SPA 应用中，应用加载之后就不会再有整页刷新。相反，展示逻辑预先加载，并有赖于内容 Region（区域）中的视图切换来展示内容。

  优点 ：

  1. 有良好的交互体验
     能提升页面切换体验，用户在访问应用页面是不会频繁的去切换浏览页面，从而避免了页面的重新加载；
  2. 对服务器的压力较小
  3. 前后端分离

  缺点：

  1. SEO 难度较高
     由于所有的内容都在一个页面中动态替换显示，所以在 SEO 上其有着天然的弱势
  2. 初次加载耗时多
     为实现单页 Web 应用功能及显示效果，需要在加载页面的时候将 JavaScript、CSS 统一加载，部分页面可以在需要的时候加载。

- 多页面应用

  多页面跳转刷新所有资源，每个公共资源(js、css 等)需选择性重新加载

  优点：

  1. 有利于 SEO
  2. 首屏加载相对资源较少
  3. 更容易扩展
  4. 更易的数据分析

  缺点：

  1. 无法通过程序保存全局状态
  2. 页面切换没有动画效果，用户体验相对较差
  3. 程序开发成本高
  4. 增加服务端压力，多页面会不停的加载
