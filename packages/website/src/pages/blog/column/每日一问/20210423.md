# 4 月 23 日题目

## 一、在 React 项目中，想要进行逻辑复用，有哪些方案？

1. 对应有状态的
   - 单纯将 js 抽象成自定义 hooks 进行逻辑复用，
   - 将整个功能做抽象，写成业务组件
2. 无状态
   - 单独写在 js 文件里，做为公共方法
3. 高阶组件
   在基础组件的基础上，做逻辑覆盖

逻辑复用首先我们应该想到的是组件，但是组件的话除了逻辑的复用之外，还有视图的复用。 很多时候我们只想进行逻辑的复用而不想进行视图的复用，可以怎么处理呢？ 如果只想进行逻辑的复用，而不想进行视图的复用，常用方案如下：

- HOC（高阶组件）
  HOC（高阶组件）类似于高阶函数，在使用高阶组件时，传入一个组件，会返回一个组件。 举个我们使用频率比较多的例子 - withRouter。

- hooks
  hooks 的出现，主要目的就是解决逻辑复用问题。相比于高阶组件，hooks 的使用更灵活，更自由。 已 Router 的 hooks 对比 withRouter 。使用 withRouter 时，会一次性将路由所有相关数据导入组件， 而 hooks 我们按照需求只导入 location 或 history 等。 另外一个组件中，要复用多个逻辑时，高阶组件明显使用起来就比较不便。

  高阶组件可以做的事情，hooks 都可以去做，而且 hooks 的使用比高级组件更灵活也更方便，但是 hooks 只能用在函数组件下。

- render props

  render props 同样是 react 中，复用逻辑的小技巧，并不是标准定义的 API。 简单来说，就是组件具有一个 render 属性，该属性接收的是一个函数，该组件中要渲染的视图是 render 属性的返回值。 举一个我们使用最多的常见，Route 组件的 render 属性。

  Route 组件中的这个 render 属性就是一个关于 render props 的实际应用。 将组件内要渲染的视图放在 render 属性的返回值中，而组件本身是一个路由逻辑的共用。 这样就做到了功能复用而视图自定义。

高阶组件或 hook，通常用在单一的逻辑复用，比如实时获取当前滚动条位置，或定义 state，副作用处理等，都是单一的逻辑。 而 render props 通常是一个完整的功能复用，只是该功能中视图或部分视图需要由使用者定义，比如，弹窗功能，路由功能 等，项目中使用到这些功能的地方有很多，但是使用时，视图可能有差异。

## 二、在 React 中 ，针对类组件和函数组件，分别怎么去进行性能优化？

1. 函数组件
   - useMemo
   - useCallback
2. 类组件
   - shouldComponentUpdate
   - PureComponent
3. 组件 key 值
