/*! For license information please see history.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.zyliangHistory=t():e.zyliangHistory=t()}(self,(function(){return(()=>{"use strict";var e={"./config/index.js":(e,t,a)=>{a.r(t),a.d(t,{BeforeUnloadEventType:()=>n,HashChangeEventType:()=>o,PopStateEventType:()=>r,actionType:()=>s,enumValueType:()=>i});const n="beforeunload",o="hashchange",r="popstate",s={push:"PUSH",replace:"REPLACE",pop:"POP"},i={object:"Object",array:"Array",basic:"Basic"}},"./src/createBrowserHistory.js":(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var n=a("./utils/index.js"),o=a("./config/index.js"),r=a("./utils/LocationUtils.js");function s(e={}){const{window:t=document.defaultView,isShowBeforeUnload:a=!1}=e,s=e.basename?(0,n.stripTrailingSlash)((0,n.addLeadingSlash)(e.basename)):"",i=t.history,c=(0,n.createEventList)({removeCallback:p}),l=(0,n.createEventList)({isNeedResult:!0,removeCallback:p});let u=o.actionType.pop,h=(0,r.createLocation)({path:t.location,basename:s,state:i.state});function f(e){let a=(0,r.createLocation)({path:t.location,basename:s,state:i.state});(0,r.createPath)(a)!==(0,r.createPath)(h)&&function(e){if(d)d=!1,console.log("blockedPopTx",d);else{const t={action:o.actionType.pop,location:e};if(l.length){if(l.call(t))console.log(h,e),h=e;else{const t=h.state.index-e.state.index;console.log("isNotOk",d,h,e),b(t)}}else y(t)}}(a)}function p(){t.removeEventListener(o.PopStateEventType,f)}t.addEventListener(o.PopStateEventType,f);let d=null;function g(e){const{action:t,location:a}=e;return!l.length||l.call({action:t,location:a})}function y(e){u=e.action,h=e.location,c.call({action:u,location:h})}function b(e){i.go(e)}function m(e){a&&(e.preventDefault(),e.returnValue="")}return{get action(){return u},get location(){return h},createHref:function(e){if("string"==typeof e)return(0,r.createPath)((0,r.createLocation)({path:e,basename:s}))},push:function(e,t){const a=o.actionType.push,n=Object.assign({},t,{index:h.state&&h.state.index+1}),c=(0,r.createLocation)({path:e,state:n,basename:s}),l={action:a,location:c};if(g(l)){try{const e=(0,r.getBaseHref)()+s+(0,r.createPath)(c);i.pushState(n,"",e)}catch(e){console.error(e)}y(l)}},replace:function(e,t){const a=o.actionType.push,n=Object.assign({},t,{index:h.state&&h.state.index}),c=(0,r.createLocation)({path:e,state:n,basename:s}),l={action:a,location:c};if(g(l)){try{const e=(0,r.getBaseHref)()+s+(0,r.createPath)(c);i.replaceState(n,"",e)}catch(e){console.error(e)}y(l)}},go:b,back:function(){b(-1)},forward:function(){b(1)},listen:function(e){return c.push(e)},block:function(e){let a=l.push(e);return 1===l.length&&t.addEventListener(o.BeforeUnloadEventType,m),()=>{a(),l.length||t.removeEventListener(o.BeforeUnloadEventType,m)}}}}},"./src/createHashHistory.js":(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var n=a("./utils/index.js"),o=a("./config/index.js"),r=a("./utils/LocationUtils.js");function s(e={}){const{window:t=document.defaultView,isShowBeforeUnload:a=!1}=e,s=e.basename?(0,n.stripTrailingSlash)((0,n.addLeadingSlash)(e.basename)):"",i=t.history,c=(0,n.createEventList)({removeCallback:p}),l=(0,n.createEventList)({isNeedResult:!0,removeCallback:p});let u=o.actionType.pop,h=(0,r.createLocation)({path:t.location.hash.substr(1),basename:s,state:i.state});function f(e){let a=(0,r.createLocation)({path:t.location.hash.substr(1),basename:s,state:i.state});(0,r.createPath)(a)!==(0,r.createPath)(h)&&function(e){{const t={action:o.actionType.pop,location:e};if(l.length){if(l.call(t))h=e;else{y(h.state.index-e.state.index)}}else g(t)}}(a)}function p(){t.removeEventListener(o.HashChangeEventType,f)}t.addEventListener(o.HashChangeEventType,f);function d(e){const{action:t,location:a}=e;return!l.length||l.call({action:t,location:a})}function g(e){u=e.action,h=e.location,c.call({action:u,location:h})}function y(e){i.go(e)}function b(e){a&&(e.preventDefault(),e.returnValue="")}return{get action(){return u},get location(){return h},createHref:function(e){if("string"==typeof e)return(0,r.createPath)((0,r.createLocation)({path:e,basename:s}))},push:function(e,t){const a=o.actionType.push,n=Object.assign({},t,{index:h.state&&h.state.index+1}),c=(0,r.createLocation)({path:e,state:n,basename:s}),l={action:a,location:c};if(d(l)){try{const e=(0,r.getBaseHref)()+"#"+s+(0,r.createPath)(c);i.pushState(n,"",e)}catch(e){console.error(e)}g(l)}},replace:function(e,t){const a=o.actionType.push,n=Object.assign({},t,{index:h.state&&h.state.index}),c=(0,r.createLocation)({path:e,state:n,basename:s}),l={action:a,location:c};if(d(l)){try{const e=(0,r.getBaseHref)()+"#"+s+(0,r.createPath)(c);i.replaceState(n,"",e)}catch(e){console.error(e)}g(l)}},go:y,back:function(){y(-1)},forward:function(){y(1)},listen:function(e){return c.push(e)},block:function(e){let a=l.push(e);return 1===l.length&&t.addEventListener(o.BeforeUnloadEventType,b),()=>{a(),l.length||t.removeEventListener(o.BeforeUnloadEventType,b)}}}}},"./src/index.js":(e,t,a)=>{a.r(t),a.d(t,{createHashHistory:()=>n.default,createBrowserHistory:()=>o.default,createLocation:()=>r.createLocation,createPath:()=>r.createPath,getBaseHref:()=>r.getBaseHref,hasBasename:()=>r.hasBasename,locationsAreEqual:()=>r.locationsAreEqual,parsePath:()=>r.parsePath,stripBasename:()=>r.stripBasename,addLeadingSlash:()=>s.addLeadingSlash,createEventList:()=>s.createEventList,getUniqueKey:()=>s.getUniqueKey,getValueType:()=>s.getValueType,isObject:()=>s.isObject,stripLeadingSlash:()=>s.stripLeadingSlash,stripTrailingSlash:()=>s.stripTrailingSlash,valueEqual:()=>s.valueEqual});var n=a("./src/createHashHistory.js"),o=a("./src/createBrowserHistory.js"),r=a("./utils/LocationUtils.js"),s=a("./utils/index.js")},"./utils/LocationUtils.js":(e,t,a)=>{a.r(t),a.d(t,{createLocation:()=>o,parsePath:()=>r,createPath:()=>s,hasBasename:()=>i,stripBasename:()=>c,getBaseHref:()=>l,locationsAreEqual:()=>u});var n=a("./utils/index.js");function o(e={}){const{path:t,basename:a,key:o=(0,n.getUniqueKey)(),state:s={index:0}}=e;return{...r(t,a),key:o,state:s}}function r(e,t){let a={pathname:"/",search:"",hash:""};"string"==typeof e?a.pathname=e||"/":a=Object.assign(a,{...e});const n=a.pathname.indexOf("#");n>-1&&(a.hash=a.pathname.substr(n),a.pathname=a.pathname.substr(0,n));const o=a.pathname.indexOf("?");return o>-1&&(a.search=a.pathname.substr(o),a.pathname=a.pathname.substr(0,o)),a.pathname=c(a.pathname,t),{pathname:a.pathname,search:"?"===a.search?"":a.search,hash:"#"===a.hash?"":a.hash}}function s(e={}){const{pathname:t,search:a,hash:n}=e;let o=t||"/";return a&&"?"!==a&&(o+="?"===a.charAt(0)?a:`?${a}`),n&&"#"!==n&&(o+="#"===n.charAt(0)?n:`#${n}`),o}function i(e="",t=""){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}function c(e="",t=""){return i(e,t)?e.substr(t.length):e}function l(){let e=document.querySelector("base"),t="";if(e&&e.getAttribute("href")){let e=window.location.href,a=e.indexOf("#");t=-1===a?e:e.slice(0,a)}return t}function u(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&(0,n.valueEqual)(e.state,t.state)}},"./utils/index.js":(e,t,a)=>{a.r(t),a.d(t,{createEventList:()=>o,getUniqueKey:()=>r,isObject:()=>s,getValueType:()=>i,valueEqual:()=>c,addLeadingSlash:()=>l,stripLeadingSlash:()=>u,stripTrailingSlash:()=>h});var n=a("./config/index.js");function o(e={}){const{isNeedResult:t=!1,removeCallback:a}=e;let n=[];return{get length(){return n.length},push:e=>(n.push(e),()=>{n=n.filter((t=>t!==e)),n.length||a&&a()}),call(e){let a=!0;for(let o=0,r=n.length;o<r;o++){const r=n[o];if(a=r&&r(e),t&&!a)break}return a}}}function r(e=""){let t=Date.now().toString(32)+e.toString(),a=[],n=1,o=0;for(let e=1,r=t.length;e<=r;e++)e===n&&(a[o]=String.fromCharCode(65+Math.floor(22*Math.random())),o++,n*=2),a[o]=t[e-1],o++;return a.join("")}function s(e){return e&&"object"==typeof e&&"[object Object]"===toString.call(e)}function i(e){let t=n.enumValueType.basic;s(e)&&(t=n.enumValueType.object),Array.isArray(e)&&(t=n.enumValueType.array)}function c(e,t){const a=i(e);if(a!==i(t))return!1;if(a===n.enumValueType.basic)return e===t;if(a===n.enumValueType.object){const a=Object.keys(e);for(let n=0,o=a.length;n<o;n++){const o=a[n];if(!c(e[o],t[o]))return!1}}if(a===n.enumValueType.array){if(e.length!==t.length)return falsei;for(let a=0,n=e.length;a<n;a++){if(!c(e[a],t[a]))return!1}}return!1}function l(e){return"/"===e.charAt(0)?e:"/"+e}function u(e){return"/"===e.charAt(0)?e.substr(1):e}function h(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}}},t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,a),o.exports}return a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a("./src/index.js")})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96eWxpYW5nSGlzdG9yeS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8venlsaWFuZ0hpc3RvcnkvLi9jb25maWcvaW5kZXguanMiLCJ3ZWJwYWNrOi8venlsaWFuZ0hpc3RvcnkvLi9zcmMvY3JlYXRlQnJvd3Nlckhpc3RvcnkuanMiLCJ3ZWJwYWNrOi8venlsaWFuZ0hpc3RvcnkvLi9zcmMvY3JlYXRlSGFzaEhpc3RvcnkuanMiLCJ3ZWJwYWNrOi8venlsaWFuZ0hpc3RvcnkvLi91dGlscy9Mb2NhdGlvblV0aWxzLmpzIiwid2VicGFjazovL3p5bGlhbmdIaXN0b3J5Ly4vdXRpbHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8venlsaWFuZ0hpc3Rvcnkvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8venlsaWFuZ0hpc3Rvcnkvd2VicGFjay9zdGFydHVwIiwid2VicGFjazovL3p5bGlhbmdIaXN0b3J5L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly96eWxpYW5nSGlzdG9yeS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3p5bGlhbmdIaXN0b3J5L3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsIkJlZm9yZVVubG9hZEV2ZW50VHlwZSIsIkhhc2hDaGFuZ2VFdmVudFR5cGUiLCJQb3BTdGF0ZUV2ZW50VHlwZSIsImFjdGlvblR5cGUiLCJwdXNoIiwicmVwbGFjZSIsInBvcCIsImVudW1WYWx1ZVR5cGUiLCJvYmplY3QiLCJhcnJheSIsImJhc2ljIiwiY3JlYXRlQnJvd3Nlckhpc3RvcnkiLCJvcHRpb25zIiwid2luZG93IiwiZG9jdW1lbnQiLCJkZWZhdWx0VmlldyIsImlzU2hvd0JlZm9yZVVubG9hZCIsImJhc2VuYW1lIiwic3RyaXBUcmFpbGluZ1NsYXNoIiwiYWRkTGVhZGluZ1NsYXNoIiwiZ2xvYmFsSGlzdG9yeSIsImhpc3RvcnkiLCJsaXN0ZW5lcnMiLCJjcmVhdGVFdmVudExpc3QiLCJyZW1vdmVDYWxsYmFjayIsInJlbW92ZVBvcFN0YXRlRXZlbnRMaXN0ZW5GdW5jIiwiYmxvY2tlcnMiLCJpc05lZWRSZXN1bHQiLCJhY3Rpb24iLCJsb2NhdGlvbiIsImNyZWF0ZUxvY2F0aW9uIiwicGF0aCIsInN0YXRlIiwicG9wU3RhdGVFdmVudExpc3RlbkZ1bmMiLCJldmVudCIsIm5leHRMb2NhdGlvbiIsImNyZWF0ZVBhdGgiLCJibG9ja2VkUG9wVHgiLCJjb25zb2xlIiwibG9nIiwic2VuZERhdGEiLCJsZW5ndGgiLCJjYWxsIiwibGFzdEluZGV4IiwiaW5kZXgiLCJnbyIsImFwcGx5VG8iLCJoYW5kbGVQb3AiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFsbG93VG8iLCJwcm9wcyIsInByb21wdEJlZm9yZVVubG9hZCIsInByZXZlbnREZWZhdWx0IiwicmV0dXJuVmFsdWUiLCJjcmVhdGVIcmVmIiwibmV3QWN0aW9uIiwibmV3U3RhdGUiLCJPYmplY3QiLCJhc3NpZ24iLCJuZXdMb2NhdGlvbiIsInVybCIsImdldEJhc2VIcmVmIiwicHVzaFN0YXRlIiwiZSIsImVycm9yIiwicmVwbGFjZVN0YXRlIiwiYmFjayIsImZvcndhcmQiLCJsaXN0ZW4iLCJsaXN0ZW5lciIsImJsb2NrIiwiYmxvY2tlciIsInVuYmxvY2siLCJjcmVhdGVIYXNoSGlzdG9yeSIsInJlbW92ZUhhc2hDaGFuZ2VFdmVudExpc3RlbkZ1bmMiLCJoYXNoIiwic3Vic3RyIiwiaGFzaENoYW5nZUV2ZW50TGlzdGVuRnVuYyIsInBhcmFtcyIsImtleSIsImdldFVuaXF1ZUtleSIsInBhcnNlUGF0aCIsImxvY2F0aW9uUmVzdWx0IiwicGF0aG5hbWUiLCJzZWFyY2giLCJoYXNoSW5kZXgiLCJpbmRleE9mIiwic2VhcmNoSW5kZXgiLCJzdHJpcEJhc2VuYW1lIiwiY2hhckF0IiwiaGFzQmFzZW5hbWUiLCJwcmVmaXgiLCJ0b0xvd2VyQ2FzZSIsImJhc2UiLCJxdWVyeVNlbGVjdG9yIiwiaHJlZiIsImdldEF0dHJpYnV0ZSIsInNsaWNlIiwibG9jYXRpb25zQXJlRXF1YWwiLCJhIiwiYiIsInZhbHVlRXF1YWwiLCJsaXN0IiwiZm4iLCJmaWx0ZXIiLCJpdGVtIiwiYXJnIiwicmVzdWx0IiwiaSIsImxlbiIsImJhc2VEYXRhIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwibmV3S2V5IiwidmVyaWZpY2F0aW9uRGF0YSIsIm5ld0tleUluZGV4IiwiaiIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImpvaW4iLCJpc09iamVjdCIsIm9iaiIsImdldFZhbHVlVHlwZSIsInZhbCIsInR5cGUiLCJBcnJheSIsImlzQXJyYXkiLCJ2YWx1ZUEiLCJ2YWx1ZUIiLCJ2YWx1ZUFUeXBlIiwia2V5cyIsImZhbHNlaSIsInN0cmlwTGVhZGluZ1NsYXNoIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIl0sIm1hcHBpbmdzIjoiO0NBQUEsU0FBMkNBLEVBQU1DLEdBQzFCLGlCQUFaQyxTQUEwQyxpQkFBWEMsT0FDeENBLE9BQU9ELFFBQVVELElBQ1EsbUJBQVhHLFFBQXlCQSxPQUFPQyxJQUM5Q0QsT0FBTyxHQUFJSCxHQUNlLGlCQUFaQyxRQUNkQSxRQUF3QixlQUFJRCxJQUU1QkQsRUFBcUIsZUFBSUMsSUFSM0Is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M0QsRUFBS1UsT0FBUyxHQUFhVixFQUFLbUUsTUFBTSxHQUFJLEdBQUtuRSxLQ3ZJaEUyRyxFQUEyQixHQUcvQixTQUFTQyxFQUFvQkMsR0FFNUIsR0FBR0YsRUFBeUJFLEdBQzNCLE9BQU9GLEVBQXlCRSxHQUFVakosUUFHM0MsSUFBSUMsRUFBUzhJLEVBQXlCRSxHQUFZLENBR2pEakosUUFBUyxJQU9WLE9BSEFrSixFQUFvQkQsR0FBVWhKLEVBQVFBLEVBQU9ELFFBQVNnSixHQUcvQy9JLEVBQU9ELFFDakJmLE9DRkFnSixFQUFvQkcsRUFBSSxDQUFDbkosRUFBU29KLEtBQ2pDLElBQUksSUFBSS9ELEtBQU8rRCxFQUNYSixFQUFvQkssRUFBRUQsRUFBWS9ELEtBQVMyRCxFQUFvQkssRUFBRXJKLEVBQVNxRixJQUM1RXRCLE9BQU91RixlQUFldEosRUFBU3FGLEVBQUssQ0FBRWtFLFlBQVksRUFBTUMsSUFBS0osRUFBVy9ELE1DSjNFMkQsRUFBb0JLLEVBQUksQ0FBQ2xCLEVBQUtzQixJQUFTMUYsT0FBTzJGLFVBQVVDLGVBQWU1RyxLQUFLb0YsRUFBS3NCLEdDQ2pGVCxFQUFvQlksRUFBSzVKLElBQ0gsb0JBQVg2SixRQUEwQkEsT0FBT0MsYUFDMUMvRixPQUFPdUYsZUFBZXRKLEVBQVM2SixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RoRyxPQUFPdUYsZUFBZXRKLEVBQVMsYUFBYyxDQUFFK0osT0FBTyxLSEZoRGYsRUFBb0IsbUIiLCJmaWxlIjoiaGlzdG9yeS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJ6eWxpYW5nSGlzdG9yeVwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJ6eWxpYW5nSGlzdG9yeVwiXSA9IGZhY3RvcnkoKTtcbn0pKHNlbGYsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsImV4cG9ydCBjb25zdCBCZWZvcmVVbmxvYWRFdmVudFR5cGUgPSBcImJlZm9yZXVubG9hZFwiO1xyXG5leHBvcnQgY29uc3QgSGFzaENoYW5nZUV2ZW50VHlwZSA9IFwiaGFzaGNoYW5nZVwiO1xyXG5leHBvcnQgY29uc3QgUG9wU3RhdGVFdmVudFR5cGUgPSBcInBvcHN0YXRlXCI7XHJcblxyXG4vKipcclxuICog5Y6G5Y+y5qCI5LiK5LiA5qyh5pON5L2c55qE57G75Z6LXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgYWN0aW9uVHlwZSA9IHtcclxuICBwdXNoOiBcIlBVU0hcIiwgLy8g5o6o5YWl5qCIXHJcbiAgcmVwbGFjZTogXCJSRVBMQUNFXCIsIC8vIOabv+aNouagiFxyXG4gIHBvcDogXCJQT1BcIiwgLy8g5Yid5aeL5YC8XHJcbn07XHJcblxyXG4vKipcclxuICog5pWw5o2u57G75Z6L5p6a5Li+XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZW51bVZhbHVlVHlwZSA9IHtcclxuICBvYmplY3Q6IFwiT2JqZWN0XCIsXHJcbiAgYXJyYXk6IFwiQXJyYXlcIixcclxuICBiYXNpYzogXCJCYXNpY1wiLFxyXG59O1xyXG4iLCJpbXBvcnQge1xyXG4gIGNyZWF0ZUV2ZW50TGlzdCxcclxuICBzdHJpcFRyYWlsaW5nU2xhc2gsXHJcbiAgYWRkTGVhZGluZ1NsYXNoLFxyXG59IGZyb20gXCIuLi91dGlscy9pbmRleFwiO1xyXG5pbXBvcnQge1xyXG4gIEJlZm9yZVVubG9hZEV2ZW50VHlwZSxcclxuICBIYXNoQ2hhbmdlRXZlbnRUeXBlLFxyXG4gIFBvcFN0YXRlRXZlbnRUeXBlLFxyXG4gIGFjdGlvblR5cGUsXHJcbn0gZnJvbSBcIi4uL2NvbmZpZy9pbmRleFwiO1xyXG5pbXBvcnQge1xyXG4gIGNyZWF0ZVBhdGgsXHJcbiAgY3JlYXRlTG9jYXRpb24sXHJcbiAgZ2V0QmFzZUhyZWYsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL0xvY2F0aW9uVXRpbHNcIjtcclxuLyoqXHJcbiAqIOWIm+W7umhpc3Rvcnnot6/nlLFcclxuICogQHBhcmFtIHsqfSBvcHRpb25zXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVCcm93c2VySGlzdG9yeShvcHRpb25zID0ge30pIHtcclxuICBjb25zdCB7IHdpbmRvdyA9IGRvY3VtZW50LmRlZmF1bHRWaWV3LCBpc1Nob3dCZWZvcmVVbmxvYWQgPSBmYWxzZSB9ID0gb3B0aW9ucztcclxuXHJcbiAgY29uc3QgYmFzZW5hbWUgPSBvcHRpb25zLmJhc2VuYW1lXHJcbiAgICA/IHN0cmlwVHJhaWxpbmdTbGFzaChhZGRMZWFkaW5nU2xhc2gob3B0aW9ucy5iYXNlbmFtZSkpXHJcbiAgICA6IFwiXCI7XHJcblxyXG4gIC8vIOWFqOWxgGhpc3RvcnlcclxuICBjb25zdCBnbG9iYWxIaXN0b3J5ID0gd2luZG93Lmhpc3Rvcnk7XHJcblxyXG4gIC8vIOiuoumYheiAhemYn+WIl1xyXG4gIGNvbnN0IGxpc3RlbmVycyA9IGNyZWF0ZUV2ZW50TGlzdCh7XHJcbiAgICByZW1vdmVDYWxsYmFjazogcmVtb3ZlUG9wU3RhdGVFdmVudExpc3RlbkZ1bmMsXHJcbiAgfSk7XHJcbiAgLy8g5o+Q56S65LqL5Lu26Zif5YiXXHJcbiAgY29uc3QgYmxvY2tlcnMgPSBjcmVhdGVFdmVudExpc3Qoe1xyXG4gICAgaXNOZWVkUmVzdWx0OiB0cnVlLFxyXG4gICAgcmVtb3ZlQ2FsbGJhY2s6IHJlbW92ZVBvcFN0YXRlRXZlbnRMaXN0ZW5GdW5jLFxyXG4gIH0pO1xyXG5cclxuICBsZXQgYWN0aW9uID0gYWN0aW9uVHlwZS5wb3A7XHJcbiAgbGV0IGxvY2F0aW9uID0gY3JlYXRlTG9jYXRpb24oe1xyXG4gICAgcGF0aDogd2luZG93LmxvY2F0aW9uLFxyXG4gICAgYmFzZW5hbWUsXHJcbiAgICBzdGF0ZTogZ2xvYmFsSGlzdG9yeS5zdGF0ZSxcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogUG9wU3RhdGVFdmVudCDnm5HlkKzmlrnms5VcclxuICAgKi9cclxuICBmdW5jdGlvbiBwb3BTdGF0ZUV2ZW50TGlzdGVuRnVuYyhldmVudCkge1xyXG4gICAgbGV0IG5leHRMb2NhdGlvbiA9IGNyZWF0ZUxvY2F0aW9uKHtcclxuICAgICAgcGF0aDogd2luZG93LmxvY2F0aW9uLFxyXG4gICAgICBiYXNlbmFtZSxcclxuICAgICAgc3RhdGU6IGdsb2JhbEhpc3Rvcnkuc3RhdGUsXHJcbiAgICB9KTtcclxuICAgIC8vIElnbm9yZSBleHRyYW5lb3VzIGhhc2hjaGFuZ2UgZXZlbnRzLlxyXG4gICAgLy8g6L+Z6YeM5oSf6KeJ5Y+v5Lul5L2/55SoZXZlbnTkuK3nmoTmlbDmja7vvIzkvYbmmK/ov5nmoLflhpnlj6/ku6Xpgb/lhY3kuI3lkIznjq/looNoYXNo5Lit5pWw5o2u5byC5bi455qE6Zeu6aKYXHJcbiAgICBpZiAoY3JlYXRlUGF0aChuZXh0TG9jYXRpb24pICE9PSBjcmVhdGVQYXRoKGxvY2F0aW9uKSkge1xyXG4gICAgICBoYW5kbGVQb3AobmV4dExvY2F0aW9uKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZVBvcFN0YXRlRXZlbnRMaXN0ZW5GdW5jKCkge1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoUG9wU3RhdGVFdmVudFR5cGUsIHBvcFN0YXRlRXZlbnRMaXN0ZW5GdW5jKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuvue9ruebkeWQrCzlj6rmnInlho1nbyxiYWNrLGZvcndhcmTkuInnp43mg4XlhrXkuIvkvJrop6blj5FcclxuICAgKi9cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihQb3BTdGF0ZUV2ZW50VHlwZSwgcG9wU3RhdGVFdmVudExpc3RlbkZ1bmMpO1xyXG5cclxuICBsZXQgYmxvY2tlZFBvcFR4ID0gbnVsbDtcclxuICAvKipcclxuICAgKiBoYXNo5pS55Y+Y5Ye65Y+R5LqL5Lu2XHJcbiAgICovXHJcbiAgZnVuY3Rpb24gaGFuZGxlUG9wKG5leHRMb2NhdGlvbikge1xyXG4gICAgaWYgKGJsb2NrZWRQb3BUeCkge1xyXG4gICAgICBibG9ja2VkUG9wVHggPSBmYWxzZTtcclxuICAgICAgY29uc29sZS5sb2coXCJibG9ja2VkUG9wVHhcIiwgYmxvY2tlZFBvcFR4KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IG5leHRBY3Rpb24gPSBhY3Rpb25UeXBlLnBvcDtcclxuICAgICAgY29uc3Qgc2VuZERhdGEgPSB7XHJcbiAgICAgICAgYWN0aW9uOiBuZXh0QWN0aW9uLFxyXG4gICAgICAgIGxvY2F0aW9uOiBuZXh0TG9jYXRpb24sXHJcbiAgICAgIH07XHJcbiAgICAgIGlmIChibG9ja2Vycy5sZW5ndGgpIHtcclxuICAgICAgICBsZXQgaXNPayA9IGJsb2NrZXJzLmNhbGwoc2VuZERhdGEpO1xyXG4gICAgICAgIGlmICghaXNPaykge1xyXG4gICAgICAgICAgY29uc3QgbGFzdEluZGV4ID0gbG9jYXRpb24uc3RhdGUuaW5kZXggLSBuZXh0TG9jYXRpb24uc3RhdGUuaW5kZXg7XHJcbiAgICAgICAgICAvLyBibG9ja2VkUG9wVHggPSB0cnVlO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJpc05vdE9rXCIsIGJsb2NrZWRQb3BUeCwgbG9jYXRpb24sIG5leHRMb2NhdGlvbik7XHJcbiAgICAgICAgICBnbyhsYXN0SW5kZXgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhsb2NhdGlvbiwgbmV4dExvY2F0aW9uKTtcclxuICAgICAgICAgIGxvY2F0aW9uID0gbmV4dExvY2F0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhcHBseVRvKHNlbmREYXRhKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog55Sf5oiQ6ZO+5o6lXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gY3JlYXRlSHJlZihwYXRoKSB7XHJcbiAgICBpZiAodHlwZW9mIHBhdGggPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgcmV0dXJuIGNyZWF0ZVBhdGgoXHJcbiAgICAgICAgY3JlYXRlTG9jYXRpb24oe1xyXG4gICAgICAgICAgcGF0aCxcclxuICAgICAgICAgIGJhc2VuYW1lLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmmK/lkKblhYHorrjot7PovaxcclxuICAgKi9cclxuICBmdW5jdGlvbiBhbGxvd1RvKHByb3BzKSB7XHJcbiAgICBjb25zdCB7IGFjdGlvbiwgbG9jYXRpb24gfSA9IHByb3BzO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gIWJsb2NrZXJzLmxlbmd0aCB8fCBibG9ja2Vycy5jYWxsKHsgYWN0aW9uLCBsb2NhdGlvbiB9KTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlhYHorrjot7PovaxcclxuICAgKi9cclxuICBmdW5jdGlvbiBhcHBseVRvKHByb3BzKSB7XHJcbiAgICBhY3Rpb24gPSBwcm9wcy5hY3Rpb247XHJcbiAgICBsb2NhdGlvbiA9IHByb3BzLmxvY2F0aW9uO1xyXG4gICAgbGlzdGVuZXJzLmNhbGwoeyBhY3Rpb24sIGxvY2F0aW9uIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5re75Yqg6Lev55SxXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gcHVzaChwYXRoLCBzdGF0ZSkge1xyXG4gICAgY29uc3QgbmV3QWN0aW9uID0gYWN0aW9uVHlwZS5wdXNoO1xyXG4gICAgY29uc3QgbmV3U3RhdGUgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwge1xyXG4gICAgICBpbmRleDogbG9jYXRpb24uc3RhdGUgJiYgbG9jYXRpb24uc3RhdGUuaW5kZXggKyAxLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBuZXdMb2NhdGlvbiA9IGNyZWF0ZUxvY2F0aW9uKHtcclxuICAgICAgcGF0aCxcclxuICAgICAgc3RhdGU6IG5ld1N0YXRlLFxyXG4gICAgICBiYXNlbmFtZSxcclxuICAgIH0pO1xyXG4gICAgY29uc3Qgc2VuZERhdGEgPSB7XHJcbiAgICAgIGFjdGlvbjogbmV3QWN0aW9uLFxyXG4gICAgICBsb2NhdGlvbjogbmV3TG9jYXRpb24sXHJcbiAgICB9O1xyXG4gICAgaWYgKGFsbG93VG8oc2VuZERhdGEpKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gZ2V0QmFzZUhyZWYoKSArIGJhc2VuYW1lICsgY3JlYXRlUGF0aChuZXdMb2NhdGlvbik7XHJcbiAgICAgICAgZ2xvYmFsSGlzdG9yeS5wdXNoU3RhdGUobmV3U3RhdGUsIFwiXCIsIHVybCk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICB9XHJcbiAgICAgIGFwcGx5VG8oc2VuZERhdGEpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pu/5o2iXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gcmVwbGFjZShwYXRoLCBzdGF0ZSkge1xyXG4gICAgY29uc3QgbmV3QWN0aW9uID0gYWN0aW9uVHlwZS5wdXNoO1xyXG4gICAgY29uc3QgbmV3U3RhdGUgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwge1xyXG4gICAgICBpbmRleDogbG9jYXRpb24uc3RhdGUgJiYgbG9jYXRpb24uc3RhdGUuaW5kZXgsXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IG5ld0xvY2F0aW9uID0gY3JlYXRlTG9jYXRpb24oeyBwYXRoLCBzdGF0ZTogbmV3U3RhdGUsIGJhc2VuYW1lIH0pO1xyXG4gICAgY29uc3Qgc2VuZERhdGEgPSB7XHJcbiAgICAgIGFjdGlvbjogbmV3QWN0aW9uLFxyXG4gICAgICBsb2NhdGlvbjogbmV3TG9jYXRpb24sXHJcbiAgICB9O1xyXG4gICAgaWYgKGFsbG93VG8oc2VuZERhdGEpKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gZ2V0QmFzZUhyZWYoKSArIGJhc2VuYW1lICsgY3JlYXRlUGF0aChuZXdMb2NhdGlvbik7XHJcbiAgICAgICAgZ2xvYmFsSGlzdG9yeS5yZXBsYWNlU3RhdGUobmV3U3RhdGUsIFwiXCIsIHVybCk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICB9XHJcbiAgICAgIGFwcGx5VG8oc2VuZERhdGEpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Lez6L2sXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XHJcbiAgICovXHJcbiAgZnVuY3Rpb24gZ28oaW5kZXgpIHtcclxuICAgIGdsb2JhbEhpc3RvcnkuZ28oaW5kZXgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Zue6YCAXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gYmFjaygpIHtcclxuICAgIGdvKC0xKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWJjei/m1xyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGZvcndhcmQoKSB7XHJcbiAgICBnbygxKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOazqOWGjOiuoumYheiAhVxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKSB7XHJcbiAgICByZXR1cm4gbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6aG16Z2i5Yi35paw5YmN55qE5aSE55CG5pON5L2cXHJcbiAgICog5Y+q5pyJaGlzdG9yeS5iYWNrKCkg5ZKMIGhpc3RvcnkuZm9yd2FyZCgp5Lya6Kem5Y+RRlxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIHByb21wdEJlZm9yZVVubG9hZChldmVudCkge1xyXG4gICAgaWYgKCFpc1Nob3dCZWZvcmVVbmxvYWQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gQ2FuY2VsIHRoZSBldmVudCBhcyBzdGF0ZWQgYnkgdGhlIHN0YW5kYXJkLlxyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIC8vIENocm9tZSByZXF1aXJlcyByZXR1cm5WYWx1ZSB0byBiZSBzZXQuXHJcbiAgICBldmVudC5yZXR1cm5WYWx1ZSA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmj5DnpLpcclxuICAgKi9cclxuICBmdW5jdGlvbiBibG9jayhibG9ja2VyKSB7XHJcbiAgICBsZXQgdW5ibG9jayA9IGJsb2NrZXJzLnB1c2goYmxvY2tlcik7XHJcbiAgICBpZiAoYmxvY2tlcnMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKEJlZm9yZVVubG9hZEV2ZW50VHlwZSwgcHJvbXB0QmVmb3JlVW5sb2FkKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICB1bmJsb2NrKCk7XHJcbiAgICAgIGlmICghYmxvY2tlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoQmVmb3JlVW5sb2FkRXZlbnRUeXBlLCBwcm9tcHRCZWZvcmVVbmxvYWQpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgbGV0IGhpc3RvcnkgPSB7XHJcbiAgICBnZXQgYWN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gYWN0aW9uO1xyXG4gICAgfSxcclxuICAgIGdldCBsb2NhdGlvbigpIHtcclxuICAgICAgcmV0dXJuIGxvY2F0aW9uO1xyXG4gICAgfSxcclxuICAgIGNyZWF0ZUhyZWYsXHJcbiAgICBwdXNoLFxyXG4gICAgcmVwbGFjZSxcclxuICAgIGdvLFxyXG4gICAgYmFjayxcclxuICAgIGZvcndhcmQsXHJcbiAgICBsaXN0ZW4sXHJcbiAgICBibG9jayxcclxuICB9O1xyXG5cclxuICByZXR1cm4gaGlzdG9yeTtcclxufVxyXG4iLCJpbXBvcnQge1xyXG4gIGNyZWF0ZUV2ZW50TGlzdCxcclxuICBzdHJpcFRyYWlsaW5nU2xhc2gsXHJcbiAgYWRkTGVhZGluZ1NsYXNoLFxyXG59IGZyb20gXCIuLi91dGlscy9pbmRleFwiO1xyXG5pbXBvcnQge1xyXG4gIEJlZm9yZVVubG9hZEV2ZW50VHlwZSxcclxuICBIYXNoQ2hhbmdlRXZlbnRUeXBlLFxyXG4gIFBvcFN0YXRlRXZlbnRUeXBlLFxyXG4gIGFjdGlvblR5cGUsXHJcbn0gZnJvbSBcIi4uL2NvbmZpZy9pbmRleFwiO1xyXG5pbXBvcnQge1xyXG4gIGNyZWF0ZVBhdGgsXHJcbiAgY3JlYXRlTG9jYXRpb24sXHJcbiAgZ2V0QmFzZUhyZWYsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL0xvY2F0aW9uVXRpbHNcIjtcclxuLyoqXHJcbiAqIOWIm+W7umhpc3Rvcnnot6/nlLFcclxuICogQHBhcmFtIHsqfSBvcHRpb25zXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVIYXNoSGlzdG9yeShvcHRpb25zID0ge30pIHtcclxuICBjb25zdCB7IHdpbmRvdyA9IGRvY3VtZW50LmRlZmF1bHRWaWV3LCBpc1Nob3dCZWZvcmVVbmxvYWQgPSBmYWxzZSB9ID0gb3B0aW9ucztcclxuXHJcbiAgY29uc3QgYmFzZW5hbWUgPSBvcHRpb25zLmJhc2VuYW1lXHJcbiAgICA/IHN0cmlwVHJhaWxpbmdTbGFzaChhZGRMZWFkaW5nU2xhc2gob3B0aW9ucy5iYXNlbmFtZSkpXHJcbiAgICA6IFwiXCI7XHJcblxyXG4gIC8vIOWFqOWxgGhpc3RvcnlcclxuICBjb25zdCBnbG9iYWxIaXN0b3J5ID0gd2luZG93Lmhpc3Rvcnk7XHJcblxyXG4gIC8vIOiuoumYheiAhemYn+WIl1xyXG4gIGNvbnN0IGxpc3RlbmVycyA9IGNyZWF0ZUV2ZW50TGlzdCh7XHJcbiAgICByZW1vdmVDYWxsYmFjazogcmVtb3ZlSGFzaENoYW5nZUV2ZW50TGlzdGVuRnVuYyxcclxuICB9KTtcclxuICAvLyDmj5DnpLrkuovku7bpmJ/liJdcclxuICBjb25zdCBibG9ja2VycyA9IGNyZWF0ZUV2ZW50TGlzdCh7XHJcbiAgICBpc05lZWRSZXN1bHQ6IHRydWUsXHJcbiAgICByZW1vdmVDYWxsYmFjazogcmVtb3ZlSGFzaENoYW5nZUV2ZW50TGlzdGVuRnVuYyxcclxuICB9KTtcclxuXHJcbiAgbGV0IGFjdGlvbiA9IGFjdGlvblR5cGUucG9wO1xyXG4gIGxldCBsb2NhdGlvbiA9IGNyZWF0ZUxvY2F0aW9uKHtcclxuICAgIHBhdGg6IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cigxKSxcclxuICAgIGJhc2VuYW1lLFxyXG4gICAgc3RhdGU6IGdsb2JhbEhpc3Rvcnkuc3RhdGUsXHJcbiAgfSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIGhhc2hDaGFuZ2VFdmVudCDnm5HlkKzmlrnms5VcclxuICAgKi9cclxuICBmdW5jdGlvbiBoYXNoQ2hhbmdlRXZlbnRMaXN0ZW5GdW5jKGV2ZW50KSB7XHJcbiAgICBsZXQgbmV4dExvY2F0aW9uID0gY3JlYXRlTG9jYXRpb24oe1xyXG4gICAgICBwYXRoOiB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHIoMSksXHJcbiAgICAgIGJhc2VuYW1lLFxyXG4gICAgICBzdGF0ZTogZ2xvYmFsSGlzdG9yeS5zdGF0ZSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIElnbm9yZSBleHRyYW5lb3VzIGhhc2hjaGFuZ2UgZXZlbnRzLlxyXG4gICAgLy8g6L+Z6YeM5oSf6KeJ5Y+v5Lul5L2/55SoZXZlbnTkuK3nmoTmlbDmja7vvIzkvYbmmK/ov5nmoLflhpnlj6/ku6Xpgb/lhY3kuI3lkIznjq/looNoYXNo5Lit5pWw5o2u5byC5bi455qE6Zeu6aKYXHJcbiAgICBpZiAoY3JlYXRlUGF0aChuZXh0TG9jYXRpb24pICE9PSBjcmVhdGVQYXRoKGxvY2F0aW9uKSkge1xyXG4gICAgICBoYW5kbGVQb3AobmV4dExvY2F0aW9uKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZUhhc2hDaGFuZ2VFdmVudExpc3RlbkZ1bmMoKSB7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihIYXNoQ2hhbmdlRXZlbnRUeXBlLCBoYXNoQ2hhbmdlRXZlbnRMaXN0ZW5GdW5jKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuvue9ruebkeWQrCzlj6rmnInlho1nbyxiYWNrLGZvcndhcmTkuInnp43mg4XlhrXkuIvkvJrop6blj5FcclxuICAgKi9cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihIYXNoQ2hhbmdlRXZlbnRUeXBlLCBoYXNoQ2hhbmdlRXZlbnRMaXN0ZW5GdW5jKTtcclxuXHJcbiAgbGV0IGJsb2NrZWRQb3BUeCA9IG51bGw7XHJcbiAgLyoqXHJcbiAgICogaGFzaOaUueWPmOWHuuWPkeS6i+S7tlxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGhhbmRsZVBvcChuZXh0TG9jYXRpb24pIHtcclxuICAgIGlmIChibG9ja2VkUG9wVHgpIHtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IG5leHRBY3Rpb24gPSBhY3Rpb25UeXBlLnBvcDtcclxuICAgICAgY29uc3Qgc2VuZERhdGEgPSB7XHJcbiAgICAgICAgYWN0aW9uOiBuZXh0QWN0aW9uLFxyXG4gICAgICAgIGxvY2F0aW9uOiBuZXh0TG9jYXRpb24sXHJcbiAgICAgIH07XHJcbiAgICAgIGlmIChibG9ja2Vycy5sZW5ndGgpIHtcclxuICAgICAgICBsZXQgaXNPayA9IGJsb2NrZXJzLmNhbGwoc2VuZERhdGEpO1xyXG4gICAgICAgIGlmICghaXNPaykge1xyXG4gICAgICAgICAgY29uc3QgbGFzdEluZGV4ID0gbG9jYXRpb24uc3RhdGUuaW5kZXggLSBuZXh0TG9jYXRpb24uc3RhdGUuaW5kZXg7XHJcbiAgICAgICAgICBnbyhsYXN0SW5kZXgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBsb2NhdGlvbiA9IG5leHRMb2NhdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXBwbHlUbyhzZW5kRGF0YSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOeUn+aIkOmTvuaOpVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZUhyZWYocGF0aCkge1xyXG4gICAgaWYgKHR5cGVvZiBwYXRoID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgIHJldHVybiBjcmVhdGVQYXRoKFxyXG4gICAgICAgIGNyZWF0ZUxvY2F0aW9uKHtcclxuICAgICAgICAgIHBhdGgsXHJcbiAgICAgICAgICBiYXNlbmFtZSxcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5piv5ZCm5YWB6K646Lez6L2sXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gYWxsb3dUbyhwcm9wcykge1xyXG4gICAgY29uc3QgeyBhY3Rpb24sIGxvY2F0aW9uIH0gPSBwcm9wcztcclxuICAgIHJldHVybiAhYmxvY2tlcnMubGVuZ3RoIHx8IGJsb2NrZXJzLmNhbGwoeyBhY3Rpb24sIGxvY2F0aW9uIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5YWB6K646Lez6L2sXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gYXBwbHlUbyhwcm9wcykge1xyXG4gICAgYWN0aW9uID0gcHJvcHMuYWN0aW9uO1xyXG4gICAgbG9jYXRpb24gPSBwcm9wcy5sb2NhdGlvbjtcclxuICAgIGxpc3RlbmVycy5jYWxsKHsgYWN0aW9uLCBsb2NhdGlvbiB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOa3u+WKoOi3r+eUsVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIHB1c2gocGF0aCwgc3RhdGUpIHtcclxuICAgIGNvbnN0IG5ld0FjdGlvbiA9IGFjdGlvblR5cGUucHVzaDtcclxuICAgIGNvbnN0IG5ld1N0YXRlID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUsIHtcclxuICAgICAgaW5kZXg6IGxvY2F0aW9uLnN0YXRlICYmIGxvY2F0aW9uLnN0YXRlLmluZGV4ICsgMSxcclxuICAgIH0pO1xyXG4gICAgY29uc3QgbmV3TG9jYXRpb24gPSBjcmVhdGVMb2NhdGlvbih7XHJcbiAgICAgIHBhdGgsXHJcbiAgICAgIHN0YXRlOiBuZXdTdGF0ZSxcclxuICAgICAgYmFzZW5hbWUsXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHNlbmREYXRhID0ge1xyXG4gICAgICBhY3Rpb246IG5ld0FjdGlvbixcclxuICAgICAgbG9jYXRpb246IG5ld0xvY2F0aW9uLFxyXG4gICAgfTtcclxuICAgIGlmIChhbGxvd1RvKHNlbmREYXRhKSkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGdldEJhc2VIcmVmKCkgKyBcIiNcIiArIGJhc2VuYW1lICsgY3JlYXRlUGF0aChuZXdMb2NhdGlvbik7XHJcbiAgICAgICAgZ2xvYmFsSGlzdG9yeS5wdXNoU3RhdGUobmV3U3RhdGUsIFwiXCIsIHVybCk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICB9XHJcbiAgICAgIGFwcGx5VG8oc2VuZERhdGEpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pu/5o2iXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gcmVwbGFjZShwYXRoLCBzdGF0ZSkge1xyXG4gICAgY29uc3QgbmV3QWN0aW9uID0gYWN0aW9uVHlwZS5wdXNoO1xyXG4gICAgY29uc3QgbmV3U3RhdGUgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwge1xyXG4gICAgICBpbmRleDogbG9jYXRpb24uc3RhdGUgJiYgbG9jYXRpb24uc3RhdGUuaW5kZXgsXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IG5ld0xvY2F0aW9uID0gY3JlYXRlTG9jYXRpb24oeyBwYXRoLCBzdGF0ZTogbmV3U3RhdGUsIGJhc2VuYW1lIH0pO1xyXG4gICAgY29uc3Qgc2VuZERhdGEgPSB7XHJcbiAgICAgIGFjdGlvbjogbmV3QWN0aW9uLFxyXG4gICAgICBsb2NhdGlvbjogbmV3TG9jYXRpb24sXHJcbiAgICB9O1xyXG4gICAgaWYgKGFsbG93VG8oc2VuZERhdGEpKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gZ2V0QmFzZUhyZWYoKSArIFwiI1wiICsgYmFzZW5hbWUgKyBjcmVhdGVQYXRoKG5ld0xvY2F0aW9uKTtcclxuICAgICAgICBnbG9iYWxIaXN0b3J5LnJlcGxhY2VTdGF0ZShuZXdTdGF0ZSwgXCJcIiwgdXJsKTtcclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgIH1cclxuICAgICAgYXBwbHlUbyhzZW5kRGF0YSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDot7PovaxcclxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcclxuICAgKi9cclxuICBmdW5jdGlvbiBnbyhpbmRleCkge1xyXG4gICAgZ2xvYmFsSGlzdG9yeS5nbyhpbmRleCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlm57pgIBcclxuICAgKi9cclxuICBmdW5jdGlvbiBiYWNrKCkge1xyXG4gICAgZ28oLTEpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5YmN6L+bXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gZm9yd2FyZCgpIHtcclxuICAgIGdvKDEpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5rOo5YaM6K6i6ZiF6ICFXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cclxuICAgKi9cclxuICBmdW5jdGlvbiBsaXN0ZW4obGlzdGVuZXIpIHtcclxuICAgIHJldHVybiBsaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpobXpnaLliLfmlrDliY3nmoTlpITnkIbmk43kvZxcclxuICAgKiDlj6rmnIloaXN0b3J5LmJhY2soKSDlkowgaGlzdG9yeS5mb3J3YXJkKCnkvJrop6blj5FGXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gcHJvbXB0QmVmb3JlVW5sb2FkKGV2ZW50KSB7XHJcbiAgICBpZiAoIWlzU2hvd0JlZm9yZVVubG9hZCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBDYW5jZWwgdGhlIGV2ZW50IGFzIHN0YXRlZCBieSB0aGUgc3RhbmRhcmQuXHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gQ2hyb21lIHJlcXVpcmVzIHJldHVyblZhbHVlIHRvIGJlIHNldC5cclxuICAgIGV2ZW50LnJldHVyblZhbHVlID0gXCJcIjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaPkOekulxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGJsb2NrKGJsb2NrZXIpIHtcclxuICAgIGxldCB1bmJsb2NrID0gYmxvY2tlcnMucHVzaChibG9ja2VyKTtcclxuICAgIGlmIChibG9ja2Vycy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoQmVmb3JlVW5sb2FkRXZlbnRUeXBlLCBwcm9tcHRCZWZvcmVVbmxvYWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHVuYmxvY2soKTtcclxuICAgICAgaWYgKCFibG9ja2Vycy5sZW5ndGgpIHtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihCZWZvcmVVbmxvYWRFdmVudFR5cGUsIHByb21wdEJlZm9yZVVubG9hZCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBsZXQgaGlzdG9yeSA9IHtcclxuICAgIGdldCBhY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiBhY3Rpb247XHJcbiAgICB9LFxyXG4gICAgZ2V0IGxvY2F0aW9uKCkge1xyXG4gICAgICByZXR1cm4gbG9jYXRpb247XHJcbiAgICB9LFxyXG4gICAgY3JlYXRlSHJlZixcclxuICAgIHB1c2gsXHJcbiAgICByZXBsYWNlLFxyXG4gICAgZ28sXHJcbiAgICBiYWNrLFxyXG4gICAgZm9yd2FyZCxcclxuICAgIGxpc3RlbixcclxuICAgIGJsb2NrLFxyXG4gIH07XHJcblxyXG4gIHJldHVybiBoaXN0b3J5O1xyXG59XHJcbiIsImltcG9ydCB7IGdldFVuaXF1ZUtleSwgdmFsdWVFcXVhbCB9IGZyb20gXCIuL2luZGV4XCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTG9jYXRpb24ocGFyYW1zID0ge30pIHtcclxuICBjb25zdCB7XHJcbiAgICBwYXRoLCAvLyDlnLDlnYBcclxuICAgIGJhc2VuYW1lLCAvL1xyXG4gICAga2V5ID0gZ2V0VW5pcXVlS2V5KCksIC8vIOWUr+S4gOWAvFxyXG4gICAgc3RhdGUgPSB7XHJcbiAgICAgIGluZGV4OiAwLFxyXG4gICAgfSwgLy8g54q25oCB5Y+C5pWwXHJcbiAgfSA9IHBhcmFtcztcclxuICBjb25zdCBiYXNlUGF0aEluZm8gPSBwYXJzZVBhdGgocGF0aCwgYmFzZW5hbWUpO1xyXG4gIHJldHVybiB7XHJcbiAgICAuLi5iYXNlUGF0aEluZm8sXHJcbiAgICBrZXksXHJcbiAgICBzdGF0ZSxcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICog6Kej5p6Q6Lev5b6EXHJcbiAqIEBwYXJhbSB7Kn19IHBhdGhcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVBhdGgocGF0aCwgYmFzZW5hbWUpIHtcclxuICBsZXQgbG9jYXRpb25SZXN1bHQgPSB7XHJcbiAgICBwYXRobmFtZTogXCIvXCIsXHJcbiAgICBzZWFyY2g6IFwiXCIsXHJcbiAgICBoYXNoOiBcIlwiLFxyXG4gIH07XHJcblxyXG4gIGlmICh0eXBlb2YgcGF0aCA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgbG9jYXRpb25SZXN1bHQucGF0aG5hbWUgPSBwYXRoIHx8IFwiL1wiO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBsb2NhdGlvblJlc3VsdCA9IE9iamVjdC5hc3NpZ24obG9jYXRpb25SZXN1bHQsIHsgLi4ucGF0aCB9KTtcclxuICB9XHJcblxyXG4gIC8vIOWFiOi/h+a7pGhhc2jlgLzvvIznhLblkI7lho3ov4fmu6RzZWFyY2jnmoTlhoXlrrlcclxuXHJcbiAgY29uc3QgaGFzaEluZGV4ID0gbG9jYXRpb25SZXN1bHQucGF0aG5hbWUuaW5kZXhPZihcIiNcIik7XHJcbiAgLy8g5a2Y5ZyoaGFzaOWAvFxyXG4gIGlmIChoYXNoSW5kZXggPiAtMSkge1xyXG4gICAgLy8gaGFzaOWAvFxyXG4gICAgbG9jYXRpb25SZXN1bHQuaGFzaCA9IGxvY2F0aW9uUmVzdWx0LnBhdGhuYW1lLnN1YnN0cihoYXNoSW5kZXgpO1xyXG4gICAgLy8gcGF0aG5hbWUg5YC8XHJcbiAgICBsb2NhdGlvblJlc3VsdC5wYXRobmFtZSA9IGxvY2F0aW9uUmVzdWx0LnBhdGhuYW1lLnN1YnN0cigwLCBoYXNoSW5kZXgpO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2VhcmNoSW5kZXggPSBsb2NhdGlvblJlc3VsdC5wYXRobmFtZS5pbmRleE9mKFwiP1wiKTtcclxuICBpZiAoc2VhcmNoSW5kZXggPiAtMSkge1xyXG4gICAgLy8gc2VhcmNoIOWAvFxyXG4gICAgbG9jYXRpb25SZXN1bHQuc2VhcmNoID0gbG9jYXRpb25SZXN1bHQucGF0aG5hbWUuc3Vic3RyKHNlYXJjaEluZGV4KTtcclxuICAgIC8vIHBhdGhuYW1lIOWAvFxyXG4gICAgbG9jYXRpb25SZXN1bHQucGF0aG5hbWUgPSBsb2NhdGlvblJlc3VsdC5wYXRobmFtZS5zdWJzdHIoMCwgc2VhcmNoSW5kZXgpO1xyXG4gIH1cclxuXHJcbiAgbG9jYXRpb25SZXN1bHQucGF0aG5hbWUgPSBzdHJpcEJhc2VuYW1lKGxvY2F0aW9uUmVzdWx0LnBhdGhuYW1lLCBiYXNlbmFtZSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBwYXRobmFtZTogbG9jYXRpb25SZXN1bHQucGF0aG5hbWUsXHJcbiAgICBzZWFyY2g6IGxvY2F0aW9uUmVzdWx0LnNlYXJjaCA9PT0gXCI/XCIgPyBcIlwiIDogbG9jYXRpb25SZXN1bHQuc2VhcmNoLFxyXG4gICAgaGFzaDogbG9jYXRpb25SZXN1bHQuaGFzaCA9PT0gXCIjXCIgPyBcIlwiIDogbG9jYXRpb25SZXN1bHQuaGFzaCxcclxuICB9O1xyXG59XHJcblxyXG4vLyDliJvlu7pwYXRoXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQYXRoKGxvY2F0aW9uID0ge30pIHtcclxuICBjb25zdCB7IHBhdGhuYW1lLCBzZWFyY2gsIGhhc2ggfSA9IGxvY2F0aW9uO1xyXG5cclxuICBsZXQgcGF0aCA9IHBhdGhuYW1lIHx8IFwiL1wiO1xyXG5cclxuICBpZiAoc2VhcmNoICYmIHNlYXJjaCAhPT0gXCI/XCIpXHJcbiAgICBwYXRoICs9IHNlYXJjaC5jaGFyQXQoMCkgPT09IFwiP1wiID8gc2VhcmNoIDogYD8ke3NlYXJjaH1gO1xyXG5cclxuICBpZiAoaGFzaCAmJiBoYXNoICE9PSBcIiNcIikgcGF0aCArPSBoYXNoLmNoYXJBdCgwKSA9PT0gXCIjXCIgPyBoYXNoIDogYCMke2hhc2h9YDtcclxuXHJcbiAgcmV0dXJuIHBhdGg7XHJcbn1cclxuXHJcbi8vIOaYr+WQpuWMheWQq2Jhc2VuYW1lXHJcbmV4cG9ydCBmdW5jdGlvbiBoYXNCYXNlbmFtZShwYXRoID0gXCJcIiwgcHJlZml4ID0gXCJcIikge1xyXG4gIHJldHVybiAoXHJcbiAgICBwYXRoLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihwcmVmaXgudG9Mb3dlckNhc2UoKSkgPT09IDAgJiZcclxuICAgIFwiLz8jXCIuaW5kZXhPZihwYXRoLmNoYXJBdChwcmVmaXgubGVuZ3RoKSkgIT09IC0xXHJcbiAgKTtcclxufVxyXG5cclxuLy8g5Y676ZmkYmFzZW5hbWVcclxuZXhwb3J0IGZ1bmN0aW9uIHN0cmlwQmFzZW5hbWUocGF0aCA9IFwiXCIsIHByZWZpeCA9IFwiXCIpIHtcclxuICByZXR1cm4gaGFzQmFzZW5hbWUocGF0aCwgcHJlZml4KSA/IHBhdGguc3Vic3RyKHByZWZpeC5sZW5ndGgpIDogcGF0aDtcclxufVxyXG5cclxuLyoqXHJcbiAqIOiOt+WPlmJhc2VuYW1lXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QmFzZUhyZWYoKSB7XHJcbiAgbGV0IGJhc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYmFzZVwiKTtcclxuICBsZXQgaHJlZiA9IFwiXCI7XHJcblxyXG4gIGlmIChiYXNlICYmIGJhc2UuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSkge1xyXG4gICAgbGV0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgbGV0IGhhc2hJbmRleCA9IHVybC5pbmRleE9mKFwiI1wiKTtcclxuICAgIGhyZWYgPSBoYXNoSW5kZXggPT09IC0xID8gdXJsIDogdXJsLnNsaWNlKDAsIGhhc2hJbmRleCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gaHJlZjtcclxufVxyXG5cclxuLyoqXHJcbiAqIGxvY2F0aW9uIOavlOi+g1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGxvY2F0aW9uc0FyZUVxdWFsKGEsIGIpIHtcclxuICByZXR1cm4gKFxyXG4gICAgYS5wYXRobmFtZSA9PT0gYi5wYXRobmFtZSAmJlxyXG4gICAgYS5zZWFyY2ggPT09IGIuc2VhcmNoICYmXHJcbiAgICBhLmhhc2ggPT09IGIuaGFzaCAmJlxyXG4gICAgYS5rZXkgPT09IGIua2V5ICYmXHJcbiAgICB2YWx1ZUVxdWFsKGEuc3RhdGUsIGIuc3RhdGUpXHJcbiAgKTtcclxufVxyXG4iLCJpbXBvcnQgeyBlbnVtVmFsdWVUeXBlIH0gZnJvbSBcIi4uL2NvbmZpZy9pbmRleFwiO1xyXG4vKipcclxuICog5Yib5bu65LqL5Lu26Zif5YiXXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRXZlbnRMaXN0KG9wdGlvbnMgPSB7fSkge1xyXG4gIGNvbnN0IHsgaXNOZWVkUmVzdWx0ID0gZmFsc2UsIHJlbW92ZUNhbGxiYWNrIH0gPSBvcHRpb25zO1xyXG4gIGxldCBsaXN0ID0gW107XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBnZXQgbGVuZ3RoKCkge1xyXG4gICAgICByZXR1cm4gbGlzdC5sZW5ndGg7XHJcbiAgICB9LFxyXG4gICAgcHVzaChmbikge1xyXG4gICAgICBsaXN0LnB1c2goZm4pO1xyXG4gICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIGxpc3QgPSBsaXN0LmZpbHRlcigoaXRlbSkgPT4gaXRlbSAhPT0gZm4pO1xyXG4gICAgICAgIGlmICghbGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgIHJlbW92ZUNhbGxiYWNrICYmIHJlbW92ZUNhbGxiYWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfSxcclxuICAgIGNhbGwoYXJnKSB7XHJcbiAgICAgIGxldCByZXN1bHQgPSB0cnVlO1xyXG4gICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gbGlzdC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGZuID0gbGlzdFtpXTtcclxuICAgICAgICByZXN1bHQgPSBmbiAmJiBmbihhcmcpO1xyXG4gICAgICAgIGlmIChpc05lZWRSZXN1bHQgJiYgIXJlc3VsdCkge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9LFxyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDojrflj5bllK/kuIBrZXlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRVbmlxdWVLZXkoYmFzZURhdGEgPSBcIlwiKSB7XHJcbiAgY29uc3QgdGltZVN0ciA9IERhdGUubm93KCkudG9TdHJpbmcoMzIpO1xyXG4gIGxldCBrZXkgPSB0aW1lU3RyICsgYmFzZURhdGEudG9TdHJpbmcoKTtcclxuICBsZXQgbmV3S2V5ID0gW107XHJcbiAgbGV0IHZlcmlmaWNhdGlvbkRhdGEgPSAxOyAvLyDmoKHpqoznoIHkvY3nva5cclxuICBsZXQgbmV3S2V5SW5kZXggPSAwO1xyXG4gIC8vIOmHh+eUqOa1t+S8puagoemqjOeggeWOn+eQhuWkhOeQhlxyXG4gIGZvciAobGV0IGogPSAxLCBsZW4gPSBrZXkubGVuZ3RoOyBqIDw9IGxlbjsgaisrKSB7XHJcbiAgICBpZiAoaiA9PT0gdmVyaWZpY2F0aW9uRGF0YSkge1xyXG4gICAgICBuZXdLZXlbbmV3S2V5SW5kZXhdID0gU3RyaW5nLmZyb21DaGFyQ29kZShcclxuICAgICAgICA2NSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDB4MTYpXHJcbiAgICAgICk7XHJcbiAgICAgIG5ld0tleUluZGV4Kys7XHJcbiAgICAgIHZlcmlmaWNhdGlvbkRhdGEgPSAyICogdmVyaWZpY2F0aW9uRGF0YTtcclxuICAgIH1cclxuICAgIG5ld0tleVtuZXdLZXlJbmRleF0gPSBrZXlbaiAtIDFdO1xyXG4gICAgbmV3S2V5SW5kZXgrKztcclxuICB9XHJcblxyXG4gIHJldHVybiBuZXdLZXkuam9pbihcIlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xyXG4gIHJldHVybiAoXHJcbiAgICBvYmogJiYgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiB0b1N0cmluZy5jYWxsKG9iaikgPT09IFwiW29iamVjdCBPYmplY3RdXCJcclxuICApO1xyXG59XHJcblxyXG4vKipcclxuICog6I635Y+W5pWw5o2u57G75Z6LXHJcbiAqIOi/memHjOWPquiAg+iZkeWfuuacrOaVsOaNruexu+Wei++8jHN5bWJvbOetieS4jeWcqOiAg+iZkeiMg+eVtOWGhVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFZhbHVlVHlwZSh2YWwpIHtcclxuICBsZXQgdHlwZSA9IGVudW1WYWx1ZVR5cGUuYmFzaWM7XHJcbiAgaWYgKGlzT2JqZWN0KHZhbCkpIHtcclxuICAgIHR5cGUgPSBlbnVtVmFsdWVUeXBlLm9iamVjdDtcclxuICB9XHJcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xyXG4gICAgdHlwZSA9IGVudW1WYWx1ZVR5cGUuYXJyYXk7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiDmr5TovoPkuKTkuKrlgLzmmK/lkKbnm7jnrYlcclxuICogQHBhcmFtIHsqfSBBXHJcbiAqIEBwYXJhbSB7Kn0gQlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbHVlRXF1YWwodmFsdWVBLCB2YWx1ZUIpIHtcclxuICBjb25zdCB2YWx1ZUFUeXBlID0gZ2V0VmFsdWVUeXBlKHZhbHVlQSk7XHJcbiAgY29uc3QgdmFsdWVCVHlwZSA9IGdldFZhbHVlVHlwZSh2YWx1ZUIpO1xyXG5cclxuICAvLyDnsbvlnovkuI3nm7jnrYnnmoTogq/lrprkuI3kuIDmoLdcclxuICBpZiAodmFsdWVBVHlwZSAhPT0gdmFsdWVCVHlwZSkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLy8g5Z+656GA57G75Z6L55u05o6l5YWo562J5Yik5patXHJcbiAgaWYgKHZhbHVlQVR5cGUgPT09IGVudW1WYWx1ZVR5cGUuYmFzaWMpIHtcclxuICAgIHJldHVybiB2YWx1ZUEgPT09IHZhbHVlQjtcclxuICB9XHJcblxyXG4gIC8vIOWvueixoeeahOmAkuW9kuiwg+eUqFxyXG4gIGlmICh2YWx1ZUFUeXBlID09PSBlbnVtVmFsdWVUeXBlLm9iamVjdCkge1xyXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlQSk7XHJcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0ga2V5cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xyXG4gICAgICBjb25zdCBpc0VxdWFsID0gdmFsdWVFcXVhbCh2YWx1ZUFba2V5XSwgdmFsdWVCW2tleV0pO1xyXG4gICAgICBpZiAoIWlzRXF1YWwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgLy8g5pWw57uE5YWI5Yik5pat6ZW/5bqm77yM54S25ZCO5YaN5Yik5pat5q+P5LiA5Liq5YC8XHJcbiAgaWYgKHZhbHVlQVR5cGUgPT09IGVudW1WYWx1ZVR5cGUuYXJyYXkpIHtcclxuICAgIGlmICh2YWx1ZUEubGVuZ3RoID09PSB2YWx1ZUIubGVuZ3RoKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB2YWx1ZUEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICBjb25zdCBpc0VxdWFsID0gdmFsdWVFcXVhbCh2YWx1ZUFbaV0sIHZhbHVlQltpXSk7XHJcbiAgICAgICAgaWYgKCFpc0VxdWFsKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZmFsc2VpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vLyDmt7vliqDpppbpg6jnmoQgL1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkTGVhZGluZ1NsYXNoKHBhdGgpIHtcclxuICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09IFwiL1wiID8gcGF0aCA6IFwiL1wiICsgcGF0aDtcclxufVxyXG4vLyDljrvpmaTpppbpg6jnmoQgL1xyXG5leHBvcnQgZnVuY3Rpb24gc3RyaXBMZWFkaW5nU2xhc2gocGF0aCkge1xyXG4gIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gXCIvXCIgPyBwYXRoLnN1YnN0cigxKSA6IHBhdGg7XHJcbn1cclxuLy8g5Y676Zmk5bC+6YOo55qEIC9cclxuZXhwb3J0IGZ1bmN0aW9uIHN0cmlwVHJhaWxpbmdTbGFzaChwYXRoKSB7XHJcbiAgcmV0dXJuIHBhdGguY2hhckF0KHBhdGgubGVuZ3RoIC0gMSkgPT09IFwiL1wiID8gcGF0aC5zbGljZSgwLCAtMSkgOiBwYXRoO1xyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gbW9kdWxlIGV4cG9ydHMgbXVzdCBiZSByZXR1cm5lZCBmcm9tIHJ1bnRpbWUgc28gZW50cnkgaW5saW5pbmcgaXMgZGlzYWJsZWRcbi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xucmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9pbmRleC5qc1wiKTtcbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07Il0sInNvdXJjZVJvb3QiOiIifQ==