# 4 月 12 日题目

## 一、说一下 React Hooks 在平时开发中需要注意的问题和原因？

1. 什么是Hooks？
Hook 是一些可以让你在函数组件里“钩入” React state 及生命周期等特性的函数。Hook 不能在 class 组件中使用 —— 这使得你不使用 class 也能使用 React。

2. 注意的问题和原因
React Hooks 在使用时注意事项：  
（1） 只能在 React 函数中使用（函数式组件或自定义hook）  
（2） 只能在函数最外层调用 hook，不能包括在 if，for 等语句中或者子函数中。  
（3）useState 中存储的是引用类型的数据时，修改 state 时，一定要返回新的引用。  原因：  面试时关于框架的问题一般问到问题的产生原因，更多考察的就是学员对框架原理的理解。 
 以这个问题为例，如果不了解原理，我们会得出以下答案：  
1. Hooks 专为函数组件的逻辑复用而设计所以只能用在函数式组件和自定义hooks 
 2. hooks 在调用的时候，需要确保先后调用顺序，一个顺序出问题，会导致整个程序的混乱。  
3. 如果在 useState 中存储的是引用类型，更新时不更新引用地址时的话，React 会认为我们没有更新数据，则不进行组件更新。  

useState 是有顺序的，所以如果使用if语句，会导致useState顺序发生变化，所以数值出现问题，所以不能使用if包裹，这也因为，React每次修改setState之后，都会重新调用function，所以代码重新执行了，顺序就有可能发生变化。

## 二、React 的 setState 方法是异步还是同步？

setState 在 React 方法中或者 React 事件中是异步的。但是在原生事件，或者异步程序中是同步的。想要更好的解答这个问题 batchedUpdates 的机制。

React可以检测到的时候是异步，React检测不到的时候是同步

react 中，元素的click事件等是合成事件，对于这些合成事件，setState都是异步的。

异步操作实际上是为了减少重新渲染，即将多个数据修改合并，然后批量修改，从而减少性能消耗。

batchedUpdates 的机制（待了解）：


